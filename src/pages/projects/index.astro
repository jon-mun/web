---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import FormattedDate from '../../components/FormattedDate.astro';

const projects = (await getCollection('projects')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="Projects">
	<section>
		<h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-8">Projects</h1>
		<div class="grid gap-8">
			{
				projects.map((project) => (
					<article class="border-b border-gray-100 dark:border-gray-800 pb-8 last:border-0">
						<div class="flex flex-col sm:flex-row sm:items-baseline sm:justify-between mb-2">
							<h2 class="text-xl font-semibold text-gray-900 dark:text-white">
								<a href={project.data.link} target="_blank" rel="noopener noreferrer" class="hover:text-gray-600 dark:hover:text-gray-300 transition-colors">
									{project.data.title}
								</a>
							</h2>
							<span class="text-sm text-gray-500 dark:text-gray-400 mt-1 sm:mt-0">
								<FormattedDate date={project.data.pubDate} />
							</span>
						</div>
						<p class="text-gray-600 dark:text-gray-400 mb-3">{project.data.description}</p>
						<div class="flex flex-wrap gap-2">
							{project.data.tags.map((tag) => (
								<span class="bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 text-xs px-2 py-1 rounded">
									{tag}
								</span>
							))}
						</div>
					</article>
				))
			}
		</div>
	</section>
</Layout>